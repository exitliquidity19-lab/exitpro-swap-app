<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>EXIT PRO – HyperSwap</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>

<style>
:root { --neon:#00ff9d; --bg:#090b0f; --card:#131a1a; }
body { background:var(--bg); color:#e0fef4; font-family:Inter,sans-serif }
.glass { background:var(--card); border-radius:24px; border:1px solid rgba(0,255,157,.15) }
.token-box { background:#1b2424 }
.neon { color:var(--neon) }
</style>
</head>

<body class="min-h-screen flex items-center justify-center px-4">

<div class="glass max-w-md w-full p-6">

<!-- HEADER -->
<div class="flex justify-between mb-6">
<h1 class="font-black italic neon text-xl">EXIT PRO</h1>
<button id="connectBtn" class="border border-[#00ff9d] px-4 py-1 rounded-xl text-xs">
CONNECT
</button>
</div>

<!-- SELL -->
<div class="token-box p-4 rounded-2xl mb-2">
<div class="flex justify-between text-xs opacity-50 mb-2">
<span>YOU SELL</span>
<span id="fromBal">Bal: 0</span>
</div>
<input id="fromAmt" placeholder="0.0"
class="w-full bg-transparent text-3xl outline-none"/>
</div>

<!-- SWITCH -->
<div class="flex justify-center my-2">
<button id="switchBtn" class="border border-[#00ff9d] rounded-xl p-2">⇅</button>
</div>

<!-- BUY -->
<div class="token-box p-4 rounded-2xl">
<div class="flex justify-between text-xs opacity-50 mb-2">
<span>YOU BUY</span>
</div>
<input id="toAmt" readonly placeholder="0.0"
class="w-full bg-transparent text-3xl opacity-40 outline-none"/>
</div>

<!-- SLIPPAGE -->
<div class="flex justify-between mt-4 text-xs">
<span>Slippage</span>
<div>
<input id="slippage" value="0.5"
class="w-12 bg-black/40 text-center rounded"/> %
</div>
</div>

<!-- INFO -->
<div id="info" class="mt-3 text-xs text-white/40"></div>

<!-- SWAP -->
<button id="swapBtn" disabled
class="mt-6 w-full py-4 bg-[#00ff9d] text-black font-black rounded-xl opacity-40">
CONNECT WALLET
</button>

</div>

<script>
/* ===== CONFIG ===== */
const RPC = 'https://api.mainnet-beta.solana.com';
const JUP = 'https://quote-api.jup.ag/v6';

/* ===== STATE ===== */
let wallet=null, pk=null, quote=null, timer=null;

let tokens = {
 from:{ mint:'So11111111111111111111111111111111111111112', decimals:9 },
 to:{ mint:'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v', decimals:6 }
};

/* ===== CONNECT ===== */
connectBtn.onclick = async ()=>{
 if(pk){
  pk=null; wallet=null;
  connectBtn.innerText='CONNECT';
  swapBtn.innerText='CONNECT WALLET';
  swapBtn.disabled=true;
  swapBtn.classList.add('opacity-40');
  return;
 }
 wallet = window.solana || window.solflare;
 if(!wallet) return alert('Open in Phantom / Solflare');
 const res = await wallet.connect();
 pk = res.publicKey.toString();
 connectBtn.innerText = pk.slice(0,4)+'...'+pk.slice(-4);
 swapBtn.innerText='SWAP NOW';
 swapBtn.disabled=false;
 swapBtn.classList.remove('opacity-40');
};

/* ===== SWITCH TOKEN ===== */
switchBtn.onclick = ()=>{
 [tokens.from, tokens.to] = [tokens.to, tokens.from];
 fromAmt.value='';
 toAmt.value='';
 info.innerHTML='';
};

/* ===== QUOTE ===== */
fromAmt.oninput = ()=>{
 clearTimeout(timer);
 timer=setTimeout(getQuote,350);
};

async function getQuote(){
 const amt=parseFloat(fromAmt.value);
 if(!amt) return;

 const slip=Math.floor(parseFloat(slippage.value)*100);
 const lamports=Math.floor(amt*10**tokens.from.decimals);

 const r=await fetch(`${JUP}/quote?inputMint=${tokens.from.mint}&outputMint=${tokens.to.mint}&amount=${lamports}&slippageBps=${slip}`);
 quote=await r.json();

 if(!quote?.outAmount) return;

 toAmt.value=(quote.outAmount/10**tokens.to.decimals).toFixed(6);

 info.innerHTML=
 `Min Received: <span class="neon">${(quote.otherAmountThreshold/10**tokens.to.decimals).toFixed(6)}</span><br>
 Price Impact: <span class="text-red-400">${(quote.priceImpactPct*100).toFixed(2)}%</span>`;
}

/* ===== SWAP ===== */
swapBtn.onclick = async ()=>{
 if(!pk || !quote) return;

 const r=await fetch(`${JUP}/swap`,{
  method:'POST',
  headers:{'Content-Type':'application/json'},
  body:JSON.stringify({
   quoteResponse:quote,
   userPublicKey:pk,
   wrapAndUnwrapSol:true
  })
 });

 const { swapTransaction } = await r.json();
 const tx = solanaWeb3.VersionedTransaction.deserialize(
  Uint8Array.from(atob(swapTransaction),c=>c.charCodeAt(0))
 );

 const signed = await wallet.signTransaction(tx);
 const conn = new solanaWeb3.Connection(RPC,'confirmed');
 const txid = await conn.sendRawTransaction(signed.serialize());
 window.open(`https://solscan.io/tx/${txid}`,'_blank');
};
</script>
</body>
</html>









 
